<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1" charset="utf-8">
<link rel="stylesheet" type="text/css" href="css/main.css">
</head>
<body>

<div class="vendor-page">
<div class="hero-image-detail">

  <div id="mySidenav" class="sidenav">
    <div class="close">
      <a href="javascript:void(0)" onclick="closeNav()"><img src="img/close.png" style='width: 100%; height: 100%;'></a>
    </div>
    <div class="navcontainer">
      <a href="index.html">Home</a>
      <!--a href="#">Services</a>
      <a href="#">Clients</a>
      <a href="#">Contact</a-->
    </div>
  </div>
  <div class="menu">
    <a onclick="openNav()" href="javascript:void(0)"><img src="img/menu.png" style='width: 100%; height: 100%;'></a>
  </div>

  <div class="back">
    <a onclick="openNav()" href="javascript:void(0)"><img src="img/back.png" style='width: 100%; height: 100%;'></a>
  </div>

  <div class="vendor-title">
  
  </div>

  <div class="vendor-tech-image">
    
  </div>

  <div class="vendor-equipment">
 
  </div>
  
  <div class="vendor-equipment-eng">
   
  </div>
  <section>
    <div class="tech-intro-mark">
      公司介紹
    </div>
  </section>
  <div class="tech-intro">
   
  </div>
   

  
</div>

<div class="middle-image">
  <div class="tech-equipment-image">
    
  </div>

  <div class="advantage-row">
    <section class="sec">
      <div class="equip-intro-mark">
        核心技術
      </div>
    </section>
    <div class="tech-advantage">
    
    </div>
  </div>
  <div style="clear:both;"></div>
</div>

<div class="detail-foot">

  <div class="foot-row">

    <section class="sec-t-a-mark">
      <div class="tech-application-mark">
        主力產品
      </div>
    </section>

    <div class="tech-application">
   
    </div>

      </div>
  
  	<div class="slide-show-row">
    <div class="slideshow-container">
      <div class="img-container">
        <div class="first-slide mySlides fade">
        </div>
      </div>
      <div class="prev-next-btn">
      <a class="prev" onclick="plusSlides(-1)"><img src="img/arrow_left.png"></a>
  		</div>
  		<div class="prev-next-btn">
      <a class="next" id="next" onclick="plusSlides(1)"><img src="img/arrow_right.png"></a>
  </div>
      <br>

      
        <div style="text-align:center;clear: left;" class="dot_here">
          <span class="dot" onclick="currentSlide(1)"></span>
        </div>
      
    </div>
	</div>
      
   
</div>
<footer class="id_footer">
    <div class="footer-text">
        海洋大學國際產學聯盟   聯絡人：高淑雲  電話：02-24622192#2297  E-Mail：gloria@mail.ntou.edu.tw
    </div>
</footer> <!-- /id_footer -->
</div>
<script src="js/jsonData.js"></script>

<script>
function openNav() {
  document.getElementById("mySidenav").style.width = "21.4%";
}

function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
}
console.log(12345);
var xhr = new XMLHttpRequest();
xhr.open('GET','data/' + getValue('vendor') + '.json',true);
console.log(xhr.responseText)
xhr.send();
console.log(xhr.responseText)
var carousel_len;
xhr.onload = function(){

    var datastr = JSON.parse(xhr.responseText);
    var vendor_title = document.querySelector('.vendor-title');
    var vendor_tech_image = document.querySelector('.vendor-tech-image');
    var vendor_equipment = document.querySelector('.vendor-equipment');
    var vendor_equipment_eng = document.querySelector('.vendor-equipment-eng');
    var tech_intro = document.querySelector('.tech-intro');
    var tech_equipment_image = document.querySelector('.tech-equipment-image');
    var tech_application = document.querySelector('.tech-application');
    carousel_len  = datastr.carousel_image.length;
    var tech_advantage = document.querySelector('.tech-advantage');
    var tech_advantage_len = datastr.tech_advantage.length;
    var carousel_img = document.querySelector('.img-container');
    var carousel_dot = document.querySelector('.dot_here');
    var carousel_first_slide = document.querySelector('.first-slide');
    var idx;
    var car_idx;
    var tmp_car_len;

    if (carousel_len > 4){
    	tmp_car_len = 4;
    }else{
    	tmp_car_len = carousel_len
    }
    console.log(carousel_first_slide.innerHTML);
    carousel_first_slide.innerHTML += '<div class="row">'
    console.log(carousel_first_slide.innerHTML);
    for (car_idx=0; car_idx<tmp_car_len; car_idx++){
    	carousel_first_slide.innerHTML += '<div class="col"><img src="data/' + datastr.carousel_image[car_idx] + '" style="width:100%;"></div>';
    	console.log(carousel_first_slide.innerHTML);
    	}
    carousel_first_slide.innerHTML += '</div>';
    console.log(carousel_first_slide.innerHTML);
    
    if (carousel_len > 4){
    	for (i=1; i< parseInt(carousel_len/4)+1;i++ ){
    		carousel_img.innerHTML += '<div class="mySlides fade"><div class="row">';
    		for (car_idx=i*4;car_idx< (i+1)*4; car_idx++ ){
    			carousel_img.innerHTML += '<div class="col"><img src="data/' + datastr.carousel_image[car_idx] + '" style="width:100%;"></div>';
    		}
    		carousel_img.innerHTML += '</div></div>';
    		carousel_dot.innerHTML += '<span class="dot" onclick="currentSlide(' + String(i+1) + ')"></span>';
    	}
    }

    vendor_title.innerHTML = datastr.vendor_title;
    var j;
    for (j=0; j<tech_advantage_len; j++) {
      tech_advantage.innerHTML += datastr.tech_advantage[j] + '<br>';
    };
    var vendor_t_i_str = '<img src="data/' + datastr.vendor_tech_image + '" style="width: 100%;height: 798.4px;">';
    vendor_tech_image.innerHTML = vendor_t_i_str;
    vendor_equipment.innerHTML = datastr.vendor_equipment;
    vendor_equipment_eng.innerHTML = datastr.vendor_equipment_eng;
    tech_equipment_image.innerHTML = '<img src="data/' + datastr.tech_equipment_image + '" style="width: 100%;">';
    var tech_application_arr = datastr.tech_application.split('&');
    var k;
    for (k=0; k<tech_application_arr.length; k++) {
      tech_application.innerHTML += tech_application_arr[k] + '<br>'
    }

    var tech_intro_arr = datastr.tech_intro.split('&');
    var z;
    for (z=0; z<tech_intro_arr.length; z++) {
      tech_intro.innerHTML += tech_intro_arr[z] + '<br>'
    }
    showSlides(1);
    };
var slideIndex = 1;
function showSlides(n) {
      var i;
  
      var slides = document.getElementsByClassName("mySlides");
      console.log(slides.length);
      var dots = document.getElementsByClassName("dot");
      if (n > slides.length) {slideIndex = 1}
      if (n < 1) {slideIndex = slides.length}
      for (i = 0; i < slides.length; i++) {
          slides[i].style.display = "none";
      }
      for (i = 0; i < dots.length; i++) {
          dots[i].className = dots[i].className.replace(" active", "");
      }
      slides[slideIndex-1].style.display = "block";
      dots[slideIndex-1].className += " active";
    };

function plusSlides(n) {
      showSlides(slideIndex += n);
    };
 function currentSlide(n) {
      showSlides(slideIndex = n);
    };
    window.setInterval(function() {
          document.querySelector('.next').click();
        }, 2500);

</script>
</body>
</html>

